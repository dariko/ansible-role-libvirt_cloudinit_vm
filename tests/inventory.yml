lbr_vms:
    hosts:
        debian10:
            ansible_host: 192.168.100.3
            drive_source: /opt/debian-10-openstack-amd64.qcow2
            vm_cpus: 1
            vm_memory_mb: 512
            vm_vnc_port: -1
            vm_userdata:
                chpasswd:
                    list: |
                        debian:password
                    expire: no
                ssh_pwauth: yes
            ansible_ssh_user: debian
            ansible_ssh_pass: password
    vars:
        vm_networks:
        -   type: bridge
            parent: br-test
            address: "{{ansible_host}}/24"

ovs_vms:
    hosts:
        ubuntu1804:
            vm_cpus: 2
            vm_memory_mb: 514
            ansible_host: 192.168.101.3
            drive_source: /opt/bionic-server-cloudimg-amd64.img
            vm_userdata: |
                #cloud-config
                chpasswd:
                    list: |
                        ubuntu:password
                    expire: no
                ssh_pwauth: yes
            ansible_python_interpreter: /usr/bin/python3
            ansible_ssh_user: ubuntu
            ansible_ssh_pass: password
    vars:
        vm_networks:
        -   type: openvswitch
            parent: ovs-test
            address: "{{ansible_host}}/24"
    
vms:
    children:
        lbr_vms:
        ovs_vms:
    vars:
        vm_drives:
        -   type: file
            source: "{{drive_source}}"
            size_gb: 8
        vm_host: localhost
        vm_domain_type: "{{ lookup('env','ANSIBLE_VM_DOMAIN_TYPE') or 'kvm' }}"
        vm_emulator_path: /usr/bin/qemu-system-x86_64
        vm_wait_for_tcp22_timeout: 1200
        ansible_become: yes

all:
    hosts:
        localhost:
            ansible_connection: local
            ansible_become: true
